name: OpenClaw Assistant
version: "0.5.41"
slug: openclaw_assistant
description: Run OpenClaw Assistant (OpenClaw-compatible) as a Home Assistant add-on.
url: https://github.com/techartdev/OpenClawHomeAssistant
arch:
  - amd64
  - aarch64
  - armv7
startup: services
boot: auto
init: false
hassio_api: false
homeassistant_api: false
host_network: true

# Home Assistant Ingress (UI inside the add-on page)
ingress: true
ingress_port: 8099
panel_title: OpenClaw Assistant
panel_icon: mdi:robot

map:
  - addon_config:rw
options:
  timezone: "Europe/Sofia"

  # Enable web terminal inside Home Assistant (Ingress) via ttyd
  enable_terminal: true

  # Terminal port (change if 7681 conflicts with another service)
  terminal_port: 7681

  # Public base URL for opening the Gateway Web UI in a new tab (not embedded).
  # Recommended: NO trailing slash.
  # Example: "https://example.duckdns.org:12345" or "http://192.168.1.10:18789"
  gateway_public_url: ""

  # Optional: Home Assistant long-lived token (for local HA API scripts/tools)
  homeassistant_token: ""

  # Optional: Router SSH defaults (leave empty if you don't need router automation)
  # This is a generic SSH configuration intended for a router/firewall or any network device
  # reachable from inside the HA host LAN.
  router_ssh_host: ""
  router_ssh_user: ""
  router_ssh_key_path: "/data/keys/router_ssh"

  # Cleanup stale session lock files left after crashes/restarts
  clean_session_locks_on_start: true
  clean_session_locks_on_exit: true

  # Gateway mode:
  # - local: Run gateway locally (recommended for most users)
  # - remote: Connect to a remote gateway
  # Default is local.
  gateway_mode: local

  # Gateway network bind mode:
  # - loopback: bind to 127.0.0.1 only (local access only, more secure)
  # - lan: bind to all interfaces (accessible from local network)
  # Default is loopback for security.
  gateway_bind_mode: loopback

  # Gateway port to listen on
  gateway_port: 18789

  # Enable OpenAI-compatible Chat Completions API endpoint
  # When enabled, OpenClaw can be used as a conversation agent in HA Assist pipeline
  # via Extended OpenAI Conversation (HACS) or any OpenAI-compatible client
  enable_openai_api: false

  # Allow insecure HTTP authentication (required for HTTP gateway access on LAN)
  # WARNING: Only enable if you're using HTTP (not HTTPS) for gateway_public_url
  # Default is false for security.
  allow_insecure_auth: false

  # --- Memory Configuration ---

  # Enable built-in SQLite hybrid memory search (BM25 + vector)
  enable_memory: true

  # Index past sessions as searchable memory
  memory_session_indexing: true

  # Mem0 cloud/self-hosted memory plugin (leave API key empty to disable)
  mem0_api_key: ""
  mem0_base_url: ""
  mem0_user_id: "ha-user"

  # Cognee cloud/self-hosted memory plugin (leave API key empty to disable)
  cognee_api_key: ""
  cognee_base_url: ""


schema:
  timezone: str
  enable_terminal: bool?
  terminal_port: int(1024,65535)?
  gateway_public_url: str?
  homeassistant_token: str?

  router_ssh_host: str
  router_ssh_user: str
  router_ssh_key_path: str

  clean_session_locks_on_start: bool?
  clean_session_locks_on_exit: bool?
  gateway_mode: list(local|remote)?
  gateway_bind_mode: list(loopback|lan)?
  gateway_port: int(1,65535)?
  enable_openai_api: bool?
  allow_insecure_auth: bool?
  enable_memory: bool?
  memory_session_indexing: bool?
  mem0_api_key: str?
  mem0_base_url: str?
  mem0_user_id: str?
  cognee_api_key: str?
  cognee_base_url: str?

